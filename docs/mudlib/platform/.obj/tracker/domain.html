<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<title></title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<div class="topNav"><a name="navbar_top">
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_">
</a>
<ul class="navList" title="Navigation">
<div class="aboutLanguage"><em><strong>Acme MUD<br/>version 0.1</strong></em></div>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>
<ul class="navList">
<li><a href="../../../../index.html?/platform/.obj/tracker/domain.html" target="_top">Frames</a></li>
<li><a href="../../../../platform/.obj/tracker/domain.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Programs</a></li>
</ul>
</li>
<li>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#field_summary">Variable</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Function</a></li>
</ul>
</li>
<li>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Variable</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Function</a></li>
</ul>
</li>
</ul>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">/platform/.obj/tracker/domain</div>
<h2 title="Program DomainTracker " class="title">Program DomainTracker </h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Inherited Programs:</dt>
<dd>
<ul class="tree"><li><a href="../../../platform/.lib/file.html" title="">FileLib </a>&nbsp;[private]
</li><li class="last"><a href="../../../platform/.lib/domain.html" title="">DomainLib </a>&nbsp;[private]
</li></ul></dd>
</dl>
<hr>
<br>
<div class="block">A service object for tracking domain configurations.</div>
<!-- 
<dl><dt><span class="strong">See Also:</span></dt><dd>
<a href="../../...html#toString()"><code>->toString()</code></a>
</dd></dl>
-->
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Function Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Function Summary table, listing functions, and an explanation">
<caption><span>Functions</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Function and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>public&nbsp;void&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../platform/.obj/tracker/domain.html#create()">create</a></strong>()</code>
<div class="block">Constructor.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected&nbsp;int&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../platform/.obj/tracker/domain.html#delete_domain()">delete_domain</a></strong>(struct DomainConfig&nbsp;config)</code>
<div class="block">Delete a domain.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected&nbsp;string&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../platform/.obj/tracker/domain.html#get_domain_root()">get_domain_root</a></strong>(string&nbsp;domain_file)</code>
<div class="block">For a specified domain file, return the root dir for that domain.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected&nbsp;string&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../platform/.obj/tracker/domain.html#get_parent_domain_file()">get_parent_domain_file</a></strong>(string&nbsp;domain_file)</code>
<div class="block">For a specified domain file, return the parent domain file, or 0 if no
parent domain exists.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>public&nbsp;void&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../platform/.obj/tracker/domain.html#parse_config()">parse_config</a></strong>(string&nbsp;domain_file)</code>
<div class="block">Parse the configuration found by specified file and return it.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected&nbsp;void&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../platform/.obj/tracker/domain.html#parse_configure_access()">parse_configure_access</a></strong>(mixed *tag,&nbsp;mixed *read_checker,&nbsp;mixed *write_checker)</code>
<div class="block">Parse the "configureAccess" configuration directive.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected&nbsp;void&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../platform/.obj/tracker/domain.html#parse_directive()">parse_directive</a></strong>(mixed *tag,&nbsp;struct DomainConfig&nbsp;config,&nbsp;mixed *read_checker,&nbsp;mixed *write_checker)</code>
<div class="block">Parse a configuration directive.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>public&nbsp;mapping&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../platform/.obj/tracker/domain.html#query_children()">query_children</a></strong>(string&nbsp;domain_id)</code>
<div class="block">Get a list of child domains belonging to a specified domain.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>public&nbsp;string&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../platform/.obj/tracker/domain.html#query_domain()">query_domain</a></strong>(string&nbsp;domain_id)</code>
<div class="block">Get the domain configuration for a specified domain id.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>public&nbsp;string&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../platform/.obj/tracker/domain.html#query_domain_id()">query_domain_id</a></strong>(string&nbsp;path)</code>
<div class="block">For a given filesystem path, return the domain id the file belongs to.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>public&nbsp;void&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../platform/.obj/tracker/domain.html#reconfig_signal()">reconfig_signal</a></strong>(string&nbsp;file,&nbsp;string&nbsp;func)</code>
<div class="block">Called when a domain.xml file is modified or removed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>public&nbsp;string&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../platform/.obj/tracker/domain.html#resolve_sysinclude()">resolve_sysinclude</a></strong>(string&nbsp;file,&nbsp;string&nbsp;p)</code>
<div class="block">Resolve a sysinclude (<file> style include) for files in a domain.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>public&nbsp;void&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../platform/.obj/tracker/domain.html#setup()">setup</a></strong>()</code>
<div class="block">Setup the DomainTracker.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected&nbsp;int&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../platform/.obj/tracker/domain.html#update_domain()">update_domain</a></strong>(struct DomainConfig&nbsp;config)</code>
<div class="block">Create a new domain or update an existing one.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_/platform/.lib/file">
</a>
<h3>Functions inherited from program&nbsp;<a href="../../../platform/.lib/file.html" title="program /platform/.lib/file">FileLib </a></h3>
<code><a href="../../../platform/.lib/file.html#basename()">basename</a>, <a href="../../../platform/.lib/file.html#copy_tree()">copy_tree</a>, <a href="../../../platform/.lib/file.html#dirname()">dirname</a>, <a href="../../../platform/.lib/file.html#expand_path()">expand_path</a>, <a href="../../../platform/.lib/file.html#expand_pattern()">expand_pattern</a>, <a href="../../../platform/.lib/file.html#file_exists()">file_exists</a>, <a href="../../../platform/.lib/file.html#is_directory()">is_directory</a>, <a href="../../../platform/.lib/file.html#is_loadable()">is_loadable</a>, <a href="../../../platform/.lib/file.html#is_special_dir()">is_special_dir</a>, <a href="../../../platform/.lib/file.html#munge_filename()">munge_filename</a>, <a href="../../../platform/.lib/file.html#read_value()">read_value</a>, <a href="../../../platform/.lib/file.html#traverse_tree()">traverse_tree</a>, <a href="../../../platform/.lib/file.html#write_value()">write_value</a></code></li>

</ul>

</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Function Detail</h3>
<a name="setup()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setup</h4>
<pre>public&nbsp;void&nbsp;setup()</pre>
<div class="block">Setup the DomainTracker.</div>
<dl>
<dl>
</dl>
</li>
</ul>
<a name="reconfig_signal()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reconfig_signal</h4>
<pre>public&nbsp;void&nbsp;reconfig_signal(string&nbsp;file,&nbsp;string&nbsp;func)</pre>
<div class="block">Called when a domain.xml file is modified or removed.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>file</code> - path to domain.xml file </dd>
<dd><code>func</code> - write method (see valid_write()) </dd>
</dl>
</li>
</ul>
<a name="parse_config()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parse_config</h4>
<pre>public&nbsp;void&nbsp;parse_config(string&nbsp;domain_file)</pre>
<div class="block">Parse the configuration found by specified file and return it.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>domain_file</code> - the domain.xml file to parse </dd>
<dt><span class="strong">Returns:</span></dt><dd>the parsed domain configuration </dd>
</dl>
</li>
</ul>
<a name="parse_directive()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parse_directive</h4>
<pre>protected&nbsp;void&nbsp;parse_directive(mixed *tag,&nbsp;struct DomainConfig&nbsp;config,&nbsp;mixed *read_checker,&nbsp;mixed *write_checker)</pre>
<div class="block">Parse a configuration directive.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>tag</code> - the XML tag specifying the directive </dd>
<dd><code>config</code> - the domain config being built </dd>
<dd><code>read_checker</code> - a partial closure which will completed with read access logic </dd>
<dd><code>write_checker</code> - a partial closure which will be completed with write access logic </dd>
</dl>
</li>
</ul>
<a name="parse_configure_access()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parse_configure_access</h4>
<pre>protected&nbsp;void&nbsp;parse_configure_access(mixed *tag,&nbsp;mixed *read_checker,&nbsp;mixed *write_checker)</pre>
<div class="block">Parse the "configureAccess" configuration directive.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>tag</code> - the configureAccess tag </dd>
<dd><code>read_checker</code> - a partial closure which will completed with read access logic </dd>
<dd><code>write_checker</code> - a partial closure which will be completed with write access logic </dd>
</dl>
</li>
</ul>
<a name="get_parent_domain_file()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get_parent_domain_file</h4>
<pre>protected&nbsp;string&nbsp;get_parent_domain_file(string&nbsp;domain_file)</pre>
<div class="block">For a specified domain file, return the parent domain file, or 0 if no
parent domain exists.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>domain_file</code> - the child domain file </dd>
<dt><span class="strong">Returns:</span></dt><dd>the parent domain file, or 0 </dd>
</dl>
</li>
</ul>
<a name="get_domain_root()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get_domain_root</h4>
<pre>protected&nbsp;string&nbsp;get_domain_root(string&nbsp;domain_file)</pre>
<div class="block">For a specified domain file, return the root dir for that domain.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>domain_file</code> - the path to the domain file </dd>
<dt><span class="strong">Returns:</span></dt><dd>the domain root </dd>
</dl>
</li>
</ul>
<a name="update_domain()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update_domain</h4>
<pre>protected&nbsp;int&nbsp;update_domain(struct DomainConfig&nbsp;config)</pre>
<div class="block">Create a new domain or update an existing one.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>config</code> - the domain configuration to update </dd>
<dt><span class="strong">Returns:</span></dt><dd>1 if confguration was successfully updated, otherwise 0 </dd>
</dl>
</li>
</ul>
<a name="delete_domain()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete_domain</h4>
<pre>protected&nbsp;int&nbsp;delete_domain(struct DomainConfig&nbsp;config)</pre>
<div class="block">Delete a domain.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>config</code> - the domain configuration to delete </dd>
<dt><span class="strong">Returns:</span></dt><dd>1 if domain was successfully deleted, otherwise 0 </dd>
</dl>
</li>
</ul>
<a name="query_domain_id()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>query_domain_id</h4>
<pre>public&nbsp;string&nbsp;query_domain_id(string&nbsp;path)</pre>
<div class="block">For a given filesystem path, return the domain id the file belongs to.
Will discover new domains from domain.xml files if necessary.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>path</code> - the path of the file for which to get domain </dd>
<dt><span class="strong">Returns:</span></dt><dd>the domain id of the file, or 0 if no domain could be found </dd>
</dl>
</li>
</ul>
<a name="query_domain()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>query_domain</h4>
<pre>public&nbsp;string&nbsp;query_domain(string&nbsp;domain_id)</pre>
<div class="block">Get the domain configuration for a specified domain id.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>domain_id</code> - the domain id to get </dd>
<dt><span class="strong">Returns:</span></dt><dd>the DomainConfig of the specified id, or 0 if no domain was found @deprecated </dd>
</dl>
</li>
</ul>
<a name="query_children()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>query_children</h4>
<pre>public&nbsp;mapping&nbsp;query_children(string&nbsp;domain_id)</pre>
<div class="block">Get a list of child domains belonging to a specified domain.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>domain_id</code> - the parent domain id </dd>
<dt><span class="strong">Returns:</span></dt><dd>a 1-d mapping of child domain ids </dd>
</dl>
</li>
</ul>
<a name="resolve_sysinclude()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resolve_sysinclude</h4>
<pre>public&nbsp;string&nbsp;resolve_sysinclude(string&nbsp;file,&nbsp;string&nbsp;p)</pre>
<div class="block">Resolve a sysinclude (<file> style include) for files in a domain. First
the domain's .include/ directory will be tried, if no matching file was
found, the global include directory will be searched. The ".." directory
in the include path will back up not just one directory but one entire
domain, even if that domain spans multiple levels of the directory tree.
The parent domain's ".include/" directory will be searched for the file
path instead.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>file</code> - the file (possibly relative) being included </dd>
<dd><code>p</code> - the compilation unit performing the include </dd>
<dt><span class="strong">Returns:</span></dt><dd>the resolved include file </dd>
</dl>
</li>
</ul>
<a name="create()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre>public&nbsp;void&nbsp;create()</pre>
<div class="block">Constructor. Make sure LoggerFactory and FileTracker have been preloaded.</div>
<dl>
<dl>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ======== END OF CLASS DATA ======== -->
<div class="bottomNav"><a name="navbar_bottom">
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_">
</a>
<ul class="navList" title="Navigation">
<div class="aboutLanguage"><em><strong>Acme MUD<br/>version 0.1</strong></em></div>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>
<ul class="navList">
<li><a href="../../../../index.html?/platform/.obj/tracker/domain.html" target="_top">Frames</a></li>
<li><a href="../../../../platform/.obj/tracker/domain.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Programs</a></li>
</ul>
</li>
<li>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#field_summary">Variable</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Function</a></li>
</ul>
</li>
<li>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Variable</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Function</a></li>
</ul>
</li>
</ul>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
</body>
</html>
