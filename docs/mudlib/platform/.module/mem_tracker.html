<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<title></title>
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<div class="topNav"><a name="navbar_top">
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_">
</a>
<ul class="navList" title="Navigation">
<div class="aboutLanguage"><em><strong>gabbo mudlib foundation<br/>version 0.1</strong></em></div>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>
<ul class="navList">
<li><a href="../../../index.html?/platform/.module/mem_tracker.html" target="_top">Frames</a></li>
<li><a href="../../../platform/.module/mem_tracker.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Programs</a></li>
</ul>
</li>
<li>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#field_summary">Variable</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Function</a></li>
</ul>
</li>
<li>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Variable</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Function</a></li>
</ul>
</li>
</ul>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">/platform/.module/mem_tracker</div>
<h2 title="Program TrackerMixin " class="title">Program TrackerMixin </h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<div class="block">A module for tracker objects. The tracked metadata will be maintained in an
ordered list (by time of creation) and a map using auto-generated keys,
which will be returned upon insertion. Each tracked type must be backed by
a SQL table with an auto-incrementing column, which will also contain any
tracked metadata. The metadata will be passed as a mapping, with the keys
denoting column names in the backing table. After insertion, an 'id' element
will be added with the id.</div>
<!-- 
<dl><dt><span class="strong">See Also:</span></dt><dd>
<a href="../...html#toString()"><code>->toString()</code></a>
</dd></dl>
-->
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Function Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Function Summary table, listing functions, and an explanation">
<caption><span>Functions</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Function and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>public&nbsp;varargs&nbsp;int&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../platform/.module/mem_tracker.html#add_tracked()">add_tracked</a></strong>(string&nbsp;name,&nbsp;mapping&nbsp;data,&nbsp;closure&nbsp;callback,&nbsp;varargs mixed *args)</code>
<div class="block">Insert a new record of tracked data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>public&nbsp;int&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../platform/.module/mem_tracker.html#expire()">expire</a></strong>()</code>
<div class="block"></div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>public&nbsp;int&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../platform/.module/mem_tracker.html#expire_tracked()">expire_tracked</a></strong>(string&nbsp;type)</code>
<div class="block">Expire stale records for the specified tracker type.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>public&nbsp;int&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../platform/.module/mem_tracker.html#get_next_expire()">get_next_expire</a></strong>()</code>
<div class="block">Get the time of the next expiration attempt, based on the next expiration
times of all tracked types.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>public&nbsp;varargs&nbsp;int&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../platform/.module/mem_tracker.html#query_tracked()">query_tracked</a></strong>(string&nbsp;type,&nbsp;mixed&nbsp;id,&nbsp;closure&nbsp;callback,&nbsp;varargs mixed *args)</code>
<div class="block">Look up a tracked data record using a specified key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>public&nbsp;int&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../platform/.module/mem_tracker.html#reset()">reset</a></strong>()</code>
<div class="block"></div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>public&nbsp;varargs&nbsp;int&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../platform/.module/mem_tracker.html#set_tracked()">set_tracked</a></strong>(string&nbsp;name,&nbsp;mapping&nbsp;data,&nbsp;closure&nbsp;callback,&nbsp;varargs mixed *args)</code>
<div class="block">Update an existing record of tracked data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>public&nbsp;int&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../platform/.module/mem_tracker.html#setup_mem_tracker()">setup_mem_tracker</a></strong>(string&nbsp;name,&nbsp;varargs int *args)</code>
<div class="block">Configure a tracker type.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>public&nbsp;void&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../platform/.module/mem_tracker.html#setup_tracker()">setup_tracker</a></strong>()</code>
<div class="block"></div>
</td>
</tr>
</table>

</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Function Detail</h3>
<a name="setup_mem_tracker()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setup_mem_tracker</h4>
<pre>public&nbsp;int&nbsp;setup_mem_tracker(string&nbsp;name,&nbsp;varargs int *args)</pre>
<div class="block">Configure a tracker type. If the type already exists, it will be
re-configured and records over the maximum will be expired from memory.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>name</code> - </dd>
<dd><code>args</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>the next expiration time </dd>
</dl>
</li>
</ul>
<a name="add_tracked()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add_tracked</h4>
<pre>public&nbsp;varargs&nbsp;int&nbsp;add_tracked(string&nbsp;name,&nbsp;mapping&nbsp;data,&nbsp;closure&nbsp;callback,&nbsp;varargs mixed *args)</pre>
<div class="block">Insert a new record of tracked data. Data must be in mapping form. If the
tracked type doesn't yet exist, will be created with a default
configuration. First, the data is added to the in-memory record list without
an id. Next, the data will be inserted into the backing SQL database. The
auto-generated id will then be added to the in-memory record map. A callback
function will be invoked upon successful completion of the update operation.
This may be synchronous or asynchronous depending on the SQL driver being
used.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>name</code> - </dd>
<dd><code>data</code> - the tracked data </dd>
<dd><code>callback</code> - a closure to call once tracking is active </dd>
<dd><code>args</code> - extra args to pass to the callback </dd>
<dt><span class="strong">Returns:</span></dt><dd>0 for failure, 1 for success </dd>
</dl>
</li>
</ul>
<a name="set_tracked()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>set_tracked</h4>
<pre>public&nbsp;varargs&nbsp;int&nbsp;set_tracked(string&nbsp;name,&nbsp;mapping&nbsp;data,&nbsp;closure&nbsp;callback,&nbsp;varargs mixed *args)</pre>
<div class="block">Update an existing record of tracked data. Data must be in mapping form, and
must either contain a valid id or all keys represented in the keys array
for the configured tracker type. Either the id or keys may be provided, and
all other members of the passed data will be the new values to sign to the
other members of the existing tracked data. If both the id and keys are
provided, the id will be used to identify the record, and the key values
will treated as any other value to update (provided the maintain
uniqueness). It is not possible to update the id. A callback function will
be invoked upon successful completion of the update operation. This may be
synchronous or asynchronous depending on the SQL driver being used.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>name</code> - </dd>
<dd><code>data</code> - the tracked data </dd>
<dd><code>callback</code> - a closure to call when the update is complete </dd>
<dd><code>args</code> - extra args to pass to the callback </dd>
<dt><span class="strong">Returns:</span></dt><dd>0 for failure, 1 for success </dd>
</dl>
</li>
</ul>
<a name="query_tracked()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>query_tracked</h4>
<pre>public&nbsp;varargs&nbsp;int&nbsp;query_tracked(string&nbsp;type,&nbsp;mixed&nbsp;id,&nbsp;closure&nbsp;callback,&nbsp;varargs mixed *args)</pre>
<div class="block">Look up a tracked data record using a specified key. The key may be
expressed as a mapping, in which case it must contain either the id
or the tracker type's keys. It may also be passed as an integer, to be used
as the id. If found, the record will be passed to the provided callback
closure.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>type</code> - the tracked type </dd>
<dd><code>id</code> - </dd>
<dd><code>callback</code> - a closure to call with the selected record </dd>
<dd><code>args</code> - extra args to pass to the callback </dd>
<dt><span class="strong">Returns:</span></dt><dd>0 for failure, 1 for success </dd>
</dl>
</li>
</ul>
<a name="expire_tracked()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>expire_tracked</h4>
<pre>public&nbsp;int&nbsp;expire_tracked(string&nbsp;type)</pre>
<div class="block">Expire stale records for the specified tracker type. If the record count
exceeds the maximum, all records in exceeds of the mimimum will be freed
from memory.</div>
<dl>
<dl>
<dt><span class="strong">Parameters:</span></dt>
<dd><code>type</code> - the tracker type </dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of expired records </dd>
</dl>
</li>
</ul>
<a name="get_next_expire()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get_next_expire</h4>
<pre>public&nbsp;int&nbsp;get_next_expire()</pre>
<div class="block">Get the time of the next expiration attempt, based on the next expiration
times of all tracked types. If no expiration intervals have been set,
the default reset time will be used.</div>
<dl>
<dl>
<dt><span class="strong">Returns:</span></dt><dd>the number of seconds until the next expiration attempt </dd>
</dl>
</li>
</ul>
<a name="expire()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>expire</h4>
<pre>public&nbsp;int&nbsp;expire()</pre>
<div class="block"></div>
<dl>
<dl>
</dl>
</li>
</ul>
<a name="reset()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>public&nbsp;int&nbsp;reset()</pre>
<div class="block"></div>
<dl>
<dl>
</dl>
</li>
</ul>
<a name="setup_tracker()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setup_tracker</h4>
<pre>public&nbsp;void&nbsp;setup_tracker()</pre>
<div class="block"></div>
<dl>
<dl>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ======== END OF CLASS DATA ======== -->
<div class="bottomNav"><a name="navbar_bottom">
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_">
</a>
<ul class="navList" title="Navigation">
<div class="aboutLanguage"><em><strong>gabbo mudlib foundation<br/>version 0.1</strong></em></div>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>
<ul class="navList">
<li><a href="../../../index.html?/platform/.module/mem_tracker.html" target="_top">Frames</a></li>
<li><a href="../../../platform/.module/mem_tracker.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Programs</a></li>
</ul>
</li>
<li>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#field_summary">Variable</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Function</a></li>
</ul>
</li>
<li>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Variable</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Function</a></li>
</ul>
</li>
</ul>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
</body>
</html>
